<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<title>Sistema DEVCEASA - Embalagens</title>
</head>

<body>

	<div th:replace="~{navbar :: menu-principal}"></div>

	<div class="container mt-4">
		<h2 th:text="${embalagem.id} != null ? 'Editar Embalagem' : 'Nova Embalagem'"></h2>

		<!-- Exibir mensagens de sucesso -->
		<div th:if="${success}" class="alert alert-success mt-2" th:text="${success}"></div>

		<div th:replace="~{alert}"></div>

		<form th:action="@{/embalagens/salvar}" th:object="${embalagem}" method="post" class="mt-4">

			<div th:replace="~{validacao :: validacao}"></div>
			<!-- Exibir erros globais do formulário -->
			<div th:if="${#fields.hasErrors('*')}" class="alert alert-danger">
				<p>Existem erros no formulário:</p>
				<ul>
					<li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
				</ul>
			</div>

			<div class="mb-3">
				<label for="codigo" class="form-label">Código:</label>
				<input type="text" id="codigo" th:field="*{codigo}" class="form-control" required>
				<div th:if="${#fields.hasErrors('codigo')}" th:errors="*{codigo}" class="text-danger"></div>
			</div>

			<div class="mb-3">
				<label for="tipoEmbalagem" class="form-label">Tipo de Embalagem:</label>
				<select id="tipoEmbalagem" th:field="*{tipoEmbalagem}" class="form-select" required>
					<option value="" disable selected>Selecione um tipo de embalagem</option>
					<option th:each="tipo : ${tipos}" th:value="${tipo}" th:text="${tipo}"></option>
				</select>
			</div>

			<div class="mb-3">
				<label for="peso" class="form-label">Peso:</label>
				<input type="number" id="peso" th:field="*{peso}" class="form-control" step="0.1" required>
				<div th:if="${#fields.hasErrors('peso')}" th:errors="*{peso}" class="text-danger"></div>
			</div>

			<div class="mb-3">
				<label for="unidadeMedida" class="form-label">Unidade de Medida:</label>
				<select id="unidadeMedida" th:field="*{unidadeMedida}" class="form-select" required>
					<option value="" disable selected>Selecione uma unidade de medida</option>
					<option th:each="unidade : ${unidades}" th:value="${unidade}" th:text="${unidade}"></option>
				</select>
			</div>

			<div class="d-flex justify-content-between mt-4">
				<a th:href="@{/embalagens}" class="btn btn-secondary">Voltar</a>
				<button type="submit" class="btn btn-primary">Salvar</button>
			</div>
		</form>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
